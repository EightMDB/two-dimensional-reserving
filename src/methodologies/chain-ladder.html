<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chain Ladder - Sidebar Navigation</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
</head>
<body data-theme="light">
    <div class="app-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-chart-line"></i>
                    <span class="sidebar-title">Reserving</span>
                </div>
                <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle Sidebar">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav" role="navigation">
                <div class="nav-section">
                    <h3 class="nav-heading">Main</h3>
                    <ul class="nav-list">
                        <li>
                            <a href="../index.html" class="nav-item">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </a>
                        </li>
                        <li>
                            <a href="../projects/projects.html" class="nav-item" id="projects-trigger">
                                <i class="fas fa-folder"></i>
                                <span>Projects</span>
                                <i class="fas fa-chevron-right nav-arrow"></i>
                            </a>
                            <ul class="nav-submenu">
                                <li><a href="../projects/projects.html" class="submenu-item"><i class="fas fa-list"></i> All Projects</a></li>
                                <li><a href="#" class="submenu-item" id="new-project-link"><i class="fas fa-plus"></i> New Project</a></li>
                                <li><a href="../projects/project-comparison.html" class="submenu-item"><i class="fas fa-code-compare"></i> Compare Projects</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="../data/data-library.html" class="nav-item" id="data-trigger">
                                <i class="fas fa-database"></i>
                                <span>Data Library</span>
                                <i class="fas fa-chevron-right nav-arrow"></i>
                            </a>
                            <ul class="nav-submenu">
                                <li><a href="../data/data-library.html" class="submenu-item"><i class="fas fa-list"></i> All Datasets</a></li>
                                <li><a href="#" class="submenu-item" id="upload-dataset-link"><i class="fas fa-upload"></i> Upload Dataset</a></li>
                                <li><a href="../data/data-viewer.html" class="submenu-item"><i class="fas fa-table"></i> Data Viewer</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="../analysis/analysis-dashboard.html" class="nav-item" id="analysis-trigger">
                                <i class="fas fa-chart-bar"></i>
                                <span>Analysis</span>
                                <i class="fas fa-chevron-right nav-arrow"></i>
                            </a>
                            <ul class="nav-submenu">
                                <li><a href="../analysis/analysis-dashboard.html" class="submenu-item"><i class="fas fa-chart-line"></i> Dashboard</a></li>
                                <li><a href="../analysis/results-viewer.html" class="submenu-item"><i class="fas fa-eye"></i> Results Viewer</a></li>
                                <li><a href="../analysis/report-builder.html" class="submenu-item"><i class="fas fa-file-alt"></i> Report Builder</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-heading">Methodologies</h3>
                    <ul class="nav-list">
                        <li>
                            <a href="chain-ladder.html" class="nav-item active">
                                <i class="fas fa-link"></i>
                                <span>Chain Ladder</span>
                            </a>
                        </li>
                        <li>
                            <a href="bornhuetter-ferguson.html" class="nav-item">
                                <i class="fas fa-balance-scale"></i>
                                <span>Bornhuetter-Ferguson</span>
                            </a>
                        </li>
                        <li>
                            <a href="benktander.html" class="nav-item">
                                <i class="fas fa-bezier-curve"></i>
                                <span>Benktander</span>
                            </a>
                        </li>
                        <li>
                            <a href="cape-cod.html" class="nav-item">
                                <i class="fas fa-water"></i>
                                <span>Cape Cod</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-heading">Tools</h3>
                    <ul class="nav-list">
                        <li>
                            <a href="../tools/calculator.html" class="nav-item">
                                <i class="fas fa-calculator"></i>
                                <span>Calculator</span>
                            </a>
                        </li>
                        <li>
                            <a href="../tools/data-diagnostics.html" class="nav-item">
                                <i class="fas fa-stethoscope"></i>
                                <span>Diagnostics</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-heading">Help</h3>
                    <ul class="nav-list">
                        <li>
                            <a href="../help/help.html" class="nav-item">
                                <i class="fas fa-question-circle"></i>
                                <span>Help Center</span>
                            </a>
                        </li>
                        <li>
                            <a href="../help/methodology-guide.html" class="nav-item">
                                <i class="fas fa-book"></i>
                                <span>Methodology Guide</span>
                            </a>
                        </li>
                        <li>
                            <a href="../help/glossary.html" class="nav-item">
                                <i class="fas fa-list"></i>
                                <span>Glossary</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="sidebar-footer">
                <a href="../settings/settings.html" class="nav-item" id="settings-trigger">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                    <i class="fas fa-chevron-right nav-arrow"></i>
                </a>
                <ul class="nav-submenu">
                    <li><a href="../settings/settings.html" class="submenu-item"><i class="fas fa-cog"></i> Settings</a></li>
                    <li><a href="../settings/profile.html" class="submenu-item"><i class="fas fa-user"></i> Profile</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="top-bar-actions">
                    <button class="action-btn" id="notifications-btn" aria-label="Notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">0</span>
                    </button>
                    <button class="action-btn" id="user-menu-btn" aria-label="User Menu">
                        <i class="fas fa-user-circle"></i>
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-container methodology-page">
                <!-- Dashboard Stats Cards -->
                <section class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-card-icon blue">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="stat-card-content">
                            <h3 class="stat-value">0</h3>
                            <p class="stat-label">CL Analyses</p>
                        </div>
                        <div class="stat-card-trend">
                            <span class="trend-indicator neutral">
                                <i class="fas fa-minus"></i>
                            </span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-icon green">
                            <i class="fas fa-table"></i>
                        </div>
                        <div class="stat-card-content">
                            <h3 class="stat-value">0</h3>
                            <p class="stat-label">Triangles Created</p>
                        </div>
                        <div class="stat-card-trend">
                            <span class="trend-indicator neutral">
                                <i class="fas fa-minus"></i>
                            </span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-icon purple">
                            <i class="fas fa-folder"></i>
                        </div>
                        <div class="stat-card-content">
                            <h3 class="stat-value">0</h3>
                            <p class="stat-label">Active Projects</p>
                        </div>
                        <div class="stat-card-trend">
                            <span class="trend-indicator neutral">
                                <i class="fas fa-minus"></i>
                            </span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-icon orange">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-card-content">
                            <h3 class="stat-value">--</h3>
                            <p class="stat-label">Last Analysis</p>
                        </div>
                        <div class="stat-card-trend">
                            <span class="trend-indicator neutral">
                                <i class="fas fa-minus"></i>
                            </span>
                        </div>
                    </div>
                </section>

                <!-- Quick Actions Cards -->
                <section class="content-section">
                    <h2 class="section-title">Quick Actions</h2>
                    <div class="quick-actions-grid">
                        <div class="action-card">
                            <div class="action-card-icon">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <h3>Start Analysis</h3>
                            <p>Begin chain ladder calculation</p>
                        </div>

                        <div class="action-card">
                            <div class="action-card-icon">
                                <i class="fas fa-cog"></i>
                            </div>
                            <h3>Configure Factors</h3>
                            <p>Set age-to-age factors</p>
                        </div>

                        <div class="action-card">
                            <div class="action-card-icon">
                                <i class="fas fa-file-upload"></i>
                            </div>
                            <h3>Import Triangle</h3>
                            <p>Load development triangle data</p>
                        </div>

                        <div class="action-card">
                            <div class="action-card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>View Patterns</h3>
                            <p>Analyze development patterns</p>
                        </div>
                    </div>
                </section>

                <!-- Data Input Panel -->
                <section id="data-input" class="tab-panel active" role="tabpanel">
                    <section class="content-section">
                        <h2 class="section-title"><i class="fas fa-cloud-upload-alt"></i> Data Upload</h2>
                        <div class="quick-actions-grid">
                            <div class="action-card">
                                <div class="action-card-icon">
                                    <i class="fas fa-file-upload"></i>
                                </div>
                                <h3>Upload Claims Data</h3>
                                <p>Import CSV file with claims information</p>
                            </div>
                        </div>
                    </section>

                    <section class="content-section">
                        <h2 class="section-title"><i class="fas fa-clipboard-check"></i> Required Fields</h2>
                        <div class="quick-actions-grid">
                            <div class="action-card">
                                <div class="action-card-icon">
                                    <i class="fas fa-calendar"></i>
                                </div>
                                <h3>Incurred Date</h3>
                                <p>Date when the claim was incurred</p>
                            </div>

                            <div class="action-card">
                                <div class="action-card-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <h3>Paid Date</h3>
                                <p>Date when payment was made</p>
                            </div>

                            <div class="action-card">
                                <div class="action-card-icon">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                                <h3>Paid Amount</h3>
                                <p>Amount of the payment in dollars</p>
                            </div>
                        </div>
                    </section>

                    <section class="content-section">
                        <h2 class="section-title"><i class="fas fa-table"></i> Data Preview</h2>
                        <div class="content-card">
                            <div id="data-preview-container" class="empty-state">
                                <i class="fas fa-database"></i>
                                <h3>No Data Loaded</h3>
                                <p>Upload claims data to see a preview here</p>
                            </div>
                        </div>
                    </section>
                </section>

                <!-- Configuration Panel -->
                <section id="configuration" class="tab-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2><i class="fas fa-cog"></i> Triangle Configuration</h2>
                        <p>Configure development triangle parameters</p>
                    </div>

                    <div class="content-card">
                        <form class="config-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="granularity"><i class="fas fa-calendar"></i> Date Granularity</label>
                                    <select id="granularity" class="form-control">
                                        <option value="monthly">Monthly</option>
                                        <option value="quarterly" selected>Quarterly</option>
                                        <option value="annual">Annual</option>
                                    </select>
                                    <small>Time period for aggregation</small>
                                </div>

                                <div class="form-group">
                                    <label for="dev-method"><i class="fas fa-chart-line"></i> Development Method</label>
                                    <select id="dev-method" class="form-control">
                                        <option value="lag" selected>Lag Method</option>
                                        <option value="calendar">Calendar Period</option>
                                    </select>
                                    <small>How to measure development</small>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="factor-calc"><i class="fas fa-calculator"></i> Factor Calculation</label>
                                    <select id="factor-calc" class="form-control">
                                        <option value="simple">Simple Average</option>
                                        <option value="weighted" selected>Volume Weighted</option>
                                        <option value="recent">Recent Periods</option>
                                        <option value="exclude">Exclude High/Low</option>
                                    </select>
                                    <small>Method for calculating development factors</small>
                                </div>

                                <div class="form-group">
                                    <label for="tail-factor"><i class="fas fa-arrow-right"></i> Tail Factor</label>
                                    <input type="number" id="tail-factor" class="form-control" value="1.000" step="0.001" min="1.000">
                                    <small>Ultimate development factor</small>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-secondary">
                                    <i class="fas fa-undo"></i> Reset
                                </button>
                                <button type="button" class="btn-primary">
                                    <i class="fas fa-play"></i> Generate Triangle
                                </button>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Triangle Panel -->
                <section id="triangle" class="tab-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2><i class="fas fa-table"></i> Development Triangle</h2>
                        <p>View and analyze the claims development pattern</p>
                    </div>

                    <div class="content-card">
                        <div class="empty-state">
                            <i class="fas fa-table"></i>
                            <h3>No Triangle Generated</h3>
                            <p>Configure your settings and generate a triangle to view results here</p>
                            <button class="btn-primary tab-link" data-tab="configuration">
                                <i class="fas fa-cog"></i> Go to Configuration
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Analysis Panel -->
                <section id="analysis" class="tab-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2><i class="fas fa-chart-bar"></i> Analysis & Development Factors</h2>
                        <p>Review calculated development factors and projections</p>
                    </div>

                    <div class="content-card">
                        <div class="empty-state">
                            <i class="fas fa-chart-line"></i>
                            <h3>No Analysis Available</h3>
                            <p>Analysis will be available after generating a development triangle</p>
                            <button class="btn-primary tab-link" data-tab="configuration">
                                <i class="fas fa-cog"></i> Configure & Generate
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Export Panel -->
                <section id="export" class="tab-panel" role="tabpanel">
                    <div class="panel-header">
                        <h2><i class="fas fa-download"></i> Export Results</h2>
                        <p>Download your analysis in various formats</p>
                    </div>

                    <div class="content-card">
                        <h3>Export Options</h3>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                <span><i class="fas fa-table"></i> Include Triangles</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                <span><i class="fas fa-chart-line"></i> Include Development Factors</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                <span><i class="fas fa-calculator"></i> Include Reserve Projections</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                <span><i class="fas fa-history"></i> Include Audit Trail</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox">
                                <span><i class="fas fa-chart-pie"></i> Include Visualizations</span>
                            </label>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3>Format Selection</h3>
                        <div class="format-selector">
                            <label class="format-option active">
                                <input type="radio" name="format" value="csv" checked>
                                <div class="format-content">
                                    <i class="fas fa-file-csv"></i>
                                    <span>CSV</span>
                                </div>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="format" value="xlsx">
                                <div class="format-content">
                                    <i class="fas fa-file-excel"></i>
                                    <span>Excel</span>
                                </div>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="format" value="json">
                                <div class="format-content">
                                    <i class="fas fa-file-code"></i>
                                    <span>JSON</span>
                                </div>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="format" value="pdf">
                                <div class="format-content">
                                    <i class="fas fa-file-pdf"></i>
                                    <span>PDF</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="export-actions">
                            <button class="btn-primary large">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Upload Wizard Modal -->
    <div id="upload-wizard" class="modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-dialog wizard-dialog">
            <div class="modal-header">
                <h2><i class="fas fa-file-upload"></i> Upload Data Wizard</h2>
                <button class="modal-close" id="wizard-close-btn" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="wizard-content">
                <!-- Wizard content will be dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Analysis Configuration Wizard Modal -->
    <div id="analysis-wizard" class="modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-dialog wizard-dialog">
            <div class="modal-header">
                <h2><i class="fas fa-sliders-h"></i> Analysis Configuration</h2>
                <button class="modal-close" id="analysis-wizard-close-btn" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="analysis-wizard-content">
                <!-- Analysis wizard content will be dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Hidden file input for CSV upload -->
    <input type="file" id="csv-file-input" accept=".csv" style="display: none;">

    <!-- Project Modal -->
    <div id="project-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-backdrop"></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 id="modal-title">Manage Projects</h2>
                <button class="modal-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <button class="modal-tab active" data-tab="open">
                        <i class="fas fa-folder-open"></i> Open
                    </button>
                    <button class="modal-tab" data-tab="save">
                        <i class="fas fa-save"></i> Save
                    </button>
                    <button class="modal-tab" data-tab="new">
                        <i class="fas fa-plus"></i> New
                    </button>
                </div>
                <div class="modal-content">
                    <div id="open-tab" class="tab-pane active">
                        <div id="saved-projects-list"></div>
                    </div>
                    <div id="save-tab" class="tab-pane">
                        <label for="project-name">Project Name:</label>
                        <input type="text" id="project-name" placeholder="Enter project name">
                        <button class="btn-primary" id="save-project-confirm">Save Project</button>
                    </div>
                    <div id="new-tab" class="tab-pane">
                        <p class="warning-text">
                            <i class="fas fa-exclamation-triangle"></i>
                            Create a new project? Current unsaved work will be cleared.
                        </p>
                        <button class="btn-primary" id="new-project-confirm">Create New Project</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/sidebar.js"></script>
    <script src="../js/upload-handler.js"></script>
    <script src="../js/methodologies/chain-ladder.js"></script>
</body>
</html>
